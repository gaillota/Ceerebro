<template name="rea.credentials.index">
    <div class="container">
        <h1>{{> icon name='key' size='is-medium'}} Credentials
            <small>{{countCredentials}}</small>
        </h1>
        <hr>
        <div class="row" style="margin-bottom: 10px;">
            <div class="col-sm-4">
                <form class="form-inline">
                    <div class="form-group">
                        <input type="text" class="form-control js-search-input" value="{{queryParam}}" placeholder="Search...">
                        <button class="btn btn-default js-reset">Clear</button>
                    </div>
                </form>
            </div>
            <div class="col-sm-8">
                <div class="pull-right">
                    <a href="{{pathFor 'rea.credentials.add'}}" class="btn btn-success">
                        {{> icon name='plus'}} Add
                    </a>
                </div>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Domain</th>
                    <th class="hidden-xs">Identifier</th>
                    <th class="hidden-xs">Password</th>
                    <th class="hidden-xs">Created at</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                {{#each credentials}}
                    <tr>
                        <td>
                            <a href="{{href}}" target="_blank">
                                {{domain}}
                            </a>
                        </td>
                        <td class="hidden-xs">{{identifier}}</td>
                        <td class="hidden-xs">********</td>
                        <td class="hidden-xs">{{formatDate createdAt}}</td>
                        <td>
                            <div class="pull-right">
                                <a href="#" class="btn btn-info btn-xs js-credentials-see">
                                    {{> icon name='eye'}}
                                    <span class="hidden-xs">See</span>
                                </a>
                                <a href="{{pathFor 'rea.credentials.edit' credentialsId=_id}}"
                                   class="btn btn-warning btn-xs {{editButtonState}}">
                                    {{> icon name='edit'}}
                                    <span class="hidden-xs">Edit</span>
                                </a>
                                <button class="btn btn-danger btn-xs js-credentials-remove">
                                    {{> icon name='trash'}}
                                </button>
                            </div>
                        </td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
        {{#if isEmpty credentials}}
            <h5 class="text-center">
                {{#with queryParam}}
                    No results for <em>{{this}}</em>.
                {{else}}
                    No credentials for now...
                {{/with}}
            </h5>
        {{/if}}
    </div>

    {{> Template.dynamic template='show-credentials.modal'}}
</template>
